<!-- Nota: no se usa la clase form-group, en este caso solo es para identificar un grupo de formularios, no produce ningun cambio
 quitarlo -->
<div class="flex flex-col items-center py-3">
  <span class="font-semibold text-2xl font-sans">{{titulo}}</span>
  <div class="mt-5 w-9/12" [formGroup]="planForm" (ngSubmit)="ingresar()">
    <div class="form-group w-full">
      <p class="font-semibold font-sans">NOMBRE DEL PLAN DE ACCIÓN</p>
      <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
        <mat-label>Ingrese el nombre del plan</mat-label>
        <input type="text" matInput formControlName="nombre" [errorStateMatcher]="matcher">
        <mat-error *ngIf="planForm.controls['nombre'].hasError('required')">
          El nombre del plan es <strong>requerido</strong>
        </mat-error>
      </mat-form-field>
    </div>
    <div class="form-group w-full">
      <p class="font-semibold font-sans">RESPONSABLE DEL PLAN DE ACCIÓN</p>
      <mat-form-field appearance="outline" class="w-6/12" hideRequiredMarker="true" color="primary">
        <mat-label>Ingrese responsable</mat-label>
        <input type="text" matInput formControlName="responsable_plan" [errorStateMatcher]="matcher">
        <mat-error *ngIf="planForm.controls['responsable_plan'].hasError('required')">
          El nombre del responsable es <strong>requerido</strong>
        </mat-error>
      </mat-form-field>
    </div>
    <div class="form-group">
      <p class="font-semibold font-sans">OBJETIVO ESTRATÉGICO</p>
      <div class="flex flex-row gap-7">
        <div class="w-1/12">
          <p class="font-semibold font-sans text-xs">CÓDIGO</p>
          <div>
            <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
              <mat-label>Cod</mat-label>
              <mat-select formControlName="objetivo" required>
                <mat-option>--</mat-option>
                <mat-option *ngFor="let objetivo of objetivos" [value]="objetivo">
                  {{objetivo}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="w-11/12">
          <p class="font-semibold font-sans text-xs">OBJETIVO</p>
          <div>
            <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
              <mat-label>Objetivo</mat-label>
              <mat-select formControlName="objetivo" required>
                <mat-option>--</mat-option>
                <mat-option *ngFor="let objetivo of objetivos" [value]="objetivo">
                  {{objetivo}}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="planForm.controls['objetivo'].hasError('required')">
                El objetivo es <strong>requerido</strong>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>
    <p class="font-semibold font-sans">INDICADORES DE CUMPLIMIENTO</p>
    <div class="flex flex-row gap-5">
      <div class="w-4/12">
        <p class="font-semibold font-sans text-xs">Indicador de cumplimiento</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Ingrese indicador de cumplimiento</mat-label>
          <input type="text" matInput formControlName="indicador_plan" [errorStateMatcher]="matcher">
          <mat-error *ngIf="planForm.controls['indicador_plan'].hasError('required')">
            El indicador de cumplimiento es <strong>requerido</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Fórmula de cálculo</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Ingrese fórmula</mat-label>
          <input type="text" matInput formControlName="formula" [errorStateMatcher]="matcher">
          <mat-error *ngIf="planForm.controls['formula'].hasError('required')">
            La fórmula es <strong>requerida</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Meta/Plazo</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Ingrese meta/plazo</mat-label>
          <input type="text" matInput formControlName="meta" [errorStateMatcher]="matcher">
          <mat-error *ngIf="planForm.controls['meta'].hasError('required')">
            La meta o plazo es <strong>requerido</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Fecha de Inicio</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Fecha Inicio</mat-label>
          <input matInput [matDatepicker]="pickerinind" formControlName="ini_ind" [errorStateMatcher]="matcher">
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="pickerinind"></mat-datepicker-toggle>
          <mat-datepicker #pickerinind></mat-datepicker>
          <mat-error *ngIf="planForm.controls['ini_ind'].hasError('required')">
            La fecha de inicio es <strong>requerida</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Fecha de Fin</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Fecha Fin</mat-label>
          <input matInput [matDatepicker]="pickerfinind" formControlName="fin_ind" [errorStateMatcher]="matcher">
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="pickerfinind"></mat-datepicker-toggle>
          <mat-datepicker #pickerfinind></mat-datepicker>
          <mat-error *ngIf="planForm.controls['fin_ind'].hasError('required')">
            La fecha de fin es <strong>requerida</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <p class="font-semibold font-sans">ACTIVIDADES</p>
    <div class="flex flex-row gap-5">
      <div class="w-4/12">
        <p class="font-semibold font-sans text-xs">Actividad</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Ingrese nombre de actividad</mat-label>
          <input type="text" matInput formControlName="actividad" [errorStateMatcher]="matcher">
          <mat-error *ngIf="planForm.controls['actividad'].hasError('required')">
            El nombre de actividad es <strong>requerido</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Responsable</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Ingrese responsable</mat-label>
          <input type="text" matInput formControlName="responsable" [errorStateMatcher]="matcher">
          <mat-error *ngIf="planForm.controls['responsable'].hasError('required')">
            El responsable es <strong>requerido</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Plazo</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Ingrese plazo</mat-label>
          <input type="text" matInput formControlName="plazo" [errorStateMatcher]="matcher">
          <mat-error *ngIf="planForm.controls['plazo'].hasError('required')">
            El plazo es <strong>requerido</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Fecha de Inicio</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Fecha Inicio</mat-label>
          <input matInput [matDatepicker]="pickerinact" formControlName="ini_act" [errorStateMatcher]="matcher">
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="pickerinact"></mat-datepicker-toggle>
          <mat-datepicker #pickerinact></mat-datepicker>
          <mat-error *ngIf="planForm.controls['ini_act'].hasError('required')">
            La fecha de inicio es <strong>requerida</strong>
          </mat-error>
        </mat-form-field>
      </div>
      <div class="w-2/12">
        <p class="font-semibold font-sans text-xs">Fecha de Fin</p>
        <mat-form-field appearance="outline" class="w-full" hideRequiredMarker="true" color="primary">
          <mat-label>Fecha Fin</mat-label>
          <input matInput [matDatepicker]="pickerfinact" formControlName="fin_act" [errorStateMatcher]="matcher">
          <mat-hint>MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle matIconSuffix [for]="pickerfinact"></mat-datepicker-toggle>
          <mat-datepicker #pickerfinact></mat-datepicker>
          <mat-error *ngIf="planForm.controls['fin_act'].hasError('required')">
            La fecha de fin es <strong>requerida</strong>
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <button (click)="agregarIndicador()">Añadir Actividad</button>
    <ng-template #actContainer></ng-template>
    <ng-container formArrayName="indicadores">
      <ng-container *ngFor="let indicadorForm of indicadores.controls; let i = index">
        <div class="lesson-form-row" [formGroup]="indicadorForm">
          
        </div>
      </ng-container>
    </ng-container>
  </div>
</div>